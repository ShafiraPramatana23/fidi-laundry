package com.fidilaundry.app.ui.authimport android.content.Intentimport android.os.Bundleimport androidx.lifecycle.Observerimport com.fidilaundry.app.Rimport com.fidilaundry.app.basearch.localpref.PaperPrefsimport com.fidilaundry.app.basearch.viewmodel.RegisterViewModelimport com.fidilaundry.app.databinding.ActivityRegisterBindingimport com.fidilaundry.app.model.response.LoginResponseimport com.fidilaundry.app.ui.base.BaseActivityimport com.fidilaundry.app.util.LoadingDialogimport com.fidilaundry.app.util.fdialog.ErrorMessageimport com.fidilaundry.app.util.fdialog.FGCallbackimport com.fidilaundry.app.util.fdialog.SuccessMessageimport com.fidilaundry.app.util.setSafeOnClickListenerimport org.koin.androidx.viewmodel.ext.android.getViewModelclass RegisterActivity : BaseActivity() {    lateinit var paperPrefs: PaperPrefs    lateinit var loadingDialog: LoadingDialog    private val binding: ActivityRegisterBinding by binding(R.layout.activity_register)    private val viewModel: RegisterViewModel by lazy {        getViewModel(RegisterViewModel::class)    }    override fun onCreate(savedInstanceState: Bundle?) {        super.onCreate(savedInstanceState)        binding.apply {            lifecycleOwner = this@RegisterActivity            this.vm = viewModel        }        loadingDialog = LoadingDialog()        initViewModel()        binding.btnLogin.setSafeOnClickListener {            intent = Intent(this@RegisterActivity, LoginActivity::class.java)            startActivity(intent)            finish()        }        binding.btnRegister.setSafeOnClickListener {            viewModel.register()        }    }    private fun initViewModel() {        viewModel.registerResponse.observe(this, Observer {            handleWhenRegisSuccess(it)        })        viewModel.showProgressLiveData.observe(this, Observer { showLoading ->            if (showLoading) {                if(loadingDialog != null){                    if(!loadingDialog.isShowLoad())                        loadingDialog.showProgressDialog(this, "Mohon tunggu…")                    else {                        loadingDialog.dismissDialog()                        loadingDialog.showProgressDialog(this, "Mohon tunggu…")                    }                }            } else {                loadingDialog.dismissDialog()            }        })        viewModel.showError.observe(this, Observer { showError ->            ErrorMessage(this, "", showError)//            when (showError) {////            }        })    }    private fun handleWhenRegisSuccess(it: LoginResponse?) {        SuccessMessage(this, "", "Registrasi Anda berhasil!", object : FGCallback {            override fun onCallback() {                finish()            }        })    }}